# YouTubeè§†é¢‘æè¿°çˆ¬è™«

ä¸€ä¸ªåŸºäºSeleniumçš„YouTubeè§†é¢‘ä¿¡æ¯çˆ¬è™«ï¼Œé‡‡ç”¨ç»å…¸åˆ†å±‚æ¶æ„è®¾è®¡ã€‚

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

```
youtube_crawl/
â”œâ”€â”€ fixed_scraper.py          # ä¸»å…¥å£æ–‡ä»¶
â”œâ”€â”€ src/                      # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ __init__.py          # åŒ…åˆå§‹åŒ–æ–‡ä»¶
â”‚   â”œâ”€â”€ main.py              # ä¸»ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ scraper.py           # ç®€åŒ–çš„çˆ¬è™«ç±» (149è¡Œ)
â”‚   â”œâ”€â”€ config/              # é…ç½®å±‚
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ settings.py      # æ‰€æœ‰é…ç½®å‚æ•°
â”‚   â”œâ”€â”€ service/             # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ browser_service.py    # æµè§ˆå™¨æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ youtube_service.py    # YouTubeä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ data_service.py       # æ•°æ®æœåŠ¡
â”‚   â”‚   â””â”€â”€ logging_service.py    # æ—¥å¿—æœåŠ¡
â”‚   â””â”€â”€ utils/               # å·¥å…·å±‚
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ parsers.py       # è§£æå·¥å…·
â”‚       â”œâ”€â”€ extractors.py    # å…ƒç´ æå–å·¥å…·
â”‚       â””â”€â”€ selectors.py     # CSSé€‰æ‹©å™¨
â”œâ”€â”€ data/                    # è¾“å‡ºæ•°æ®ç›®å½•
â”œâ”€â”€ archive/                 # å½’æ¡£æ–‡ä»¶ç›®å½•
â”œâ”€â”€ logs/                    # æ—¥å¿—ç›®å½• (è‡ªåŠ¨åˆ›å»º)
â”œâ”€â”€ README.md
â”œâ”€â”€ requirements.txt
â””â”€â”€ install.py
```

## ğŸ¯ ä¸»è¦ç‰¹æ€§

### 1. **ç»å…¸åˆ†å±‚æ¶æ„**
- **é…ç½®å±‚ (config)**: é›†ä¸­ç®¡ç†æ‰€æœ‰é…ç½®å‚æ•°
- **æœåŠ¡å±‚ (service)**: å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼ŒèŒè´£åˆ†ç¦»
- **å·¥å…·å±‚ (utils)**: å¯å¤ç”¨çš„å·¥å…·å‡½æ•°
- **ä¸»å…¥å£ (main)**: ç®€æ´çš„ç¨‹åºå…¥å£

### 2. **æœåŠ¡å±‚è®¾è®¡**
- **BrowserService**: æµè§ˆå™¨ç®¡ç†
- **YouTubeService**: YouTubeä¸šåŠ¡é€»è¾‘
- **DataService**: æ•°æ®ä¿å­˜å’ŒåŠ è½½
- **LoggingService**: æ—¥å¿—ç®¡ç†

### 3. **é…ç½®é©±åŠ¨**
- æ‰€æœ‰å‚æ•°éƒ½åœ¨ `settings.py` ä¸­é…ç½®
- æ”¯æŒä¸åŒç¯å¢ƒçš„é…ç½®
- æ˜“äºç»´æŠ¤å’Œä¿®æ”¹

### 4. **é”™è¯¯å¤„ç†å’Œæ—¥å¿—**
- å®Œæ•´çš„æ—¥å¿—ç³»ç»Ÿ
- é”™è¯¯é‡è¯•æœºåˆ¶
- è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯

### 5. **ä»£ç å¤ç”¨**
- å·¥å…·å‡½æ•°æ¨¡å—åŒ–
- æœåŠ¡å±‚å¯ç‹¬ç«‹ä½¿ç”¨
- é…ç½®å±‚å¯æ‰©å±•

## ğŸ“‹ åŠŸèƒ½ç‰¹æ€§

- âœ… æœç´¢YouTubeè§†é¢‘
- âœ… æå–è§†é¢‘æ ‡é¢˜ã€é¢‘é“ã€è§‚çœ‹æ¬¡æ•°ã€ä¸Šä¼ æ—¥æœŸ
- âœ… è·å–è§†é¢‘æè¿°ï¼ˆæ’é™¤ç¬¬ä¸€è¡Œçš„è§‚çœ‹ä¿¡æ¯ï¼‰
- âœ… æ”¯æŒCSVå’ŒJSONæ ¼å¼è¾“å‡º
- âœ… å®Œæ•´çš„æ—¥å¿—è®°å½•
- âœ… é”™è¯¯é‡è¯•æœºåˆ¶
- âœ… é…ç½®åŒ–ç®¡ç†
- âœ… æ¨¡å—åŒ–è®¾è®¡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
# å®‰è£…ä¾èµ–åŒ…
pip install -r requirements.txt

# æˆ–è€…è¿è¡Œå®‰è£…è„šæœ¬
python install.py
```

### åŸºæœ¬ä½¿ç”¨

```bash
# è¿è¡Œçˆ¬è™«
python fixed_scraper.py
```

### ç¨‹åºåŒ–ä½¿ç”¨

```python
# æ–¹å¼1: ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨
from src.scraper import YouTubeScraper

with YouTubeScraper(headless=False) as scraper:
    saved_files = scraper.run("Pythonæ•™ç¨‹", 10)

# æ–¹å¼2: æ‰‹åŠ¨ç®¡ç†
scraper = YouTubeScraper(headless=False)
scraper.start()
videos = scraper.search_videos("Pythonæ•™ç¨‹", 10)
saved_files = scraper.save_results(videos, "Pythonæ•™ç¨‹")
scraper.stop()
```

## ğŸ“ è¾“å‡ºæ–‡ä»¶

ç¨‹åºä¼šåœ¨ `data/` ç›®å½•ä¸‹ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

- `{æœç´¢å…³é”®è¯}_videos.csv` - CSVæ ¼å¼çš„è§†é¢‘æ•°æ®
- `{æœç´¢å…³é”®è¯}_videos.json` - JSONæ ¼å¼çš„è§†é¢‘æ•°æ®

### æ•°æ®æ ¼å¼

```json
{
  "title": "è§†é¢‘æ ‡é¢˜",
  "channel": "é¢‘é“åç§°", 
  "view_count": "è§‚çœ‹æ¬¡æ•°",
  "date": "ä¸Šä¼ æ—¥æœŸ",
  "description": "è§†é¢‘æè¿°",
  "url": "è§†é¢‘é“¾æ¥"
}
```

## âš™ï¸ é…ç½®è¯´æ˜

æ‰€æœ‰é…ç½®éƒ½åœ¨ `src/config/settings.py` ä¸­ï¼š

### æµè§ˆå™¨é…ç½®
```python
BROWSER_CONFIG = {
    "headless": False,  # æ˜¯å¦æ— å¤´æ¨¡å¼
    "window_size": "1920,1080",
    "implicit_wait": 10,
    "page_load_timeout": 15,
    # ... æ›´å¤šé…ç½®
}
```

### çˆ¬è™«é…ç½®
```python
SCRAPER_CONFIG = {
    "max_videos": 10,  # é»˜è®¤æœ€å¤§è§†é¢‘æ•°é‡
    "scroll_count": 3,  # æ»šåŠ¨æ¬¡æ•°
    "scroll_delay": 2,  # æ»šåŠ¨é—´éš”ï¼ˆç§’ï¼‰
    # ... æ›´å¤šé…ç½®
}
```

### è¾“å‡ºé…ç½®
```python
OUTPUT_CONFIG = {
    "csv_encoding": "utf-8-sig",
    "json_encoding": "utf-8",
    "max_description_length": 2000,
    "output_formats": ["csv", "json"],
}
```

## ğŸ”§ é¡¹ç›®ç»“æ„è¯¦è§£

### é…ç½®å±‚ (config/)
- **settings.py**: é›†ä¸­ç®¡ç†æ‰€æœ‰é…ç½®å‚æ•°
- æ”¯æŒæµè§ˆå™¨ã€çˆ¬è™«ã€è¾“å‡ºã€æ—¥å¿—ã€æ­£åˆ™è¡¨è¾¾å¼ç­‰é…ç½®

### æœåŠ¡å±‚ (service/)
- **browser_service.py**: æµè§ˆå™¨é©±åŠ¨ç®¡ç†
- **youtube_service.py**: YouTubeä¸šåŠ¡é€»è¾‘å¤„ç†
- **data_service.py**: æ•°æ®ä¿å­˜å’ŒåŠ è½½
- **logging_service.py**: æ—¥å¿—é…ç½®å’Œç®¡ç†

### å·¥å…·å±‚ (utils/)
- **parsers.py**: æ•°æ®è§£æå·¥å…·
- **extractors.py**: é¡µé¢å…ƒç´ æå–å·¥å…·
- **selectors.py**: CSSé€‰æ‹©å™¨å®šä¹‰

### ä¸»ç¨‹åº
- **scraper.py**: ç®€åŒ–çš„çˆ¬è™«ç±»ï¼Œåè°ƒå„æœåŠ¡
- **main.py**: ç¨‹åºå…¥å£ï¼Œå¤„ç†ç”¨æˆ·äº¤äº’

## ğŸ“Š æ—¥å¿—ç³»ç»Ÿ

ç¨‹åºä¼šè‡ªåŠ¨åœ¨ `logs/` ç›®å½•ä¸‹ç”Ÿæˆæ—¥å¿—æ–‡ä»¶ï¼š

- æ§åˆ¶å°è¾“å‡º
- æ–‡ä»¶æ—¥å¿—ï¼ˆè‡ªåŠ¨è½®è½¬ï¼‰
- é”™è¯¯é‡è¯•è®°å½•
- æ€§èƒ½ç»Ÿè®¡

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„é…ç½®é¡¹

åœ¨ `src/config/settings.py` ä¸­æ·»åŠ ï¼š

```python
NEW_CONFIG = {
    "key": "value",
    # ... æ›´å¤šé…ç½®
}
```

### æ·»åŠ æ–°çš„æœåŠ¡

åœ¨ `src/service/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„æœåŠ¡ç±»ï¼š

```python
class NewService:
    def __init__(self):
        self.logger = logging.getLogger(__name__)
    
    def do_something(self):
        # å®ç°åŠŸèƒ½
        pass
```

### æ·»åŠ æ–°çš„å·¥å…·å‡½æ•°

åœ¨ `src/utils/` ç›®å½•ä¸‹æ·»åŠ ï¼š

```python
def new_utility_function():
    # å®ç°å·¥å…·å‡½æ•°
    pass
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ChromeDriveré—®é¢˜**
   - ç¨‹åºä½¿ç”¨ `webdriver-manager` è‡ªåŠ¨ç®¡ç†
   - ç¡®ä¿ç½‘ç»œè¿æ¥æ­£å¸¸

2. **é¡µé¢åŠ è½½è¶…æ—¶**
   - è°ƒæ•´ `page_load_timeout` é…ç½®
   - æ£€æŸ¥ç½‘ç»œè¿æ¥

3. **å…ƒç´ å®šä½å¤±è´¥**
   - æ£€æŸ¥ `selectors.py` ä¸­çš„é€‰æ‹©å™¨
   - å¯èƒ½éœ€è¦æ›´æ–°é€‰æ‹©å™¨

### è°ƒè¯•æ¨¡å¼

è®¾ç½®æ—¥å¿—çº§åˆ«ä¸ºDEBUGï¼š

```python
# åœ¨ settings.py ä¸­ä¿®æ”¹
LOGGING_CONFIG = {
    "level": "DEBUG",  # æ”¹ä¸ºDEBUG
    # ...
}
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### é…ç½®ä¼˜åŒ–

```python
# ç¦ç”¨å›¾ç‰‡åŠ è½½ä»¥æé«˜é€Ÿåº¦
BROWSER_CONFIG["chrome_options"].append("--disable-images")

# è°ƒæ•´æ»šåŠ¨å‚æ•°
SCRAPER_CONFIG["scroll_count"] = 2  # å‡å°‘æ»šåŠ¨æ¬¡æ•°
SCRAPER_CONFIG["scroll_delay"] = 1  # å‡å°‘å»¶è¿Ÿ
```

### æ— å¤´æ¨¡å¼

```python
# ä½¿ç”¨æ— å¤´æ¨¡å¼æé«˜æ€§èƒ½
scraper = YouTubeScraper(headless=True)
```

**æ³¨æ„**: è¯·éµå®ˆYouTubeçš„æœåŠ¡æ¡æ¬¾å’Œrobots.txtæ–‡ä»¶ã€‚æœ¬å·¥å…·ä»…ç”¨äºå­¦ä¹ å’Œç ”ç©¶ç›®çš„ã€‚ 
